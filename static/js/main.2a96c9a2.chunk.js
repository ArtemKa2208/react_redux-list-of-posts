(this["webpackJsonpreact_redux-list-of-posts"]=this["webpackJsonpreact_redux-list-of-posts"]||[]).push([[0],{19:function(t,e,n){},23:function(t,e,n){},25:function(t,e,n){},27:function(t,e,n){},28:function(t,e,n){"use strict";n.r(e);var c=n(8),a=n.n(c),s=(n(19),n(5)),r=n(0),o=(n(23),n(4)),u=n(6),i=n(2),l=n.n(i),p=(n(25),"https://mate.academy/students-api/posts/");function j(){return b.apply(this,arguments)}function b(){return(b=Object(o.a)(l.a.mark((function t(){var e;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(p);case 2:return e=t.sent,t.abrupt("return",e.json());case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function m(t){return d.apply(this,arguments)}function d(){return(d=Object(o.a)(l.a.mark((function t(e){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(p).concat(e));case 2:return n=t.sent,t.abrupt("return",n.json());case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var f="LOAD_POSTS",O="LOAD_POST",h="SET_POST_ID",_="LOAD_COMMENTS",x="SET_SELECTED_POST",v=function(t){return{type:_,payload:t}},y=function(t){return{type:x,payload:t}},N=function(t){return t.posts},k=function(t){return t.post},w=function(t){return t.postId},S=function(t){return t.comments},C=function(t){return t.selectedPost},g=n(1),E=function(){var t=Object(r.useState)(0),e=Object(u.a)(t,2),n=e[0],c=e[1],a=Object(s.b)(),i=Object(s.c)(N);Object(r.useEffect)((function(){var t=function(){var t=Object(o.a)(l.a.mark((function t(){var e;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j();case 2:e=t.sent,a({type:f,payload:e});case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}),[]);var p=function(t){c(t),a({type:h,payload:t}),a(y(t))};return Object(g.jsx)("div",{className:"posts",children:Object(g.jsx)("ul",{className:"posts__list",children:i.map((function(t){return Object(g.jsxs)("li",{className:"posts__item",children:[Object(g.jsx)("p",{className:"posts__title",children:t.title}),Object(g.jsx)("p",{className:"posts__body",children:t.body}),t.id===n?Object(g.jsx)("button",{className:"posts__button button small is-info",type:"button",onClick:function(){return c(0),void a(y(null))},children:"Close"}):Object(g.jsx)("button",{className:"posts__button button small is-dark",type:"button",onClick:function(){return p(t.id)},children:"Open"})]},t.id)}))})})},T=(n(27),"https://mate.academy/students-api/comments");function P(t){return I.apply(this,arguments)}function I(){return(I=Object(o.a)(l.a.mark((function t(e){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(T,"?postId=").concat(e));case 2:return n=t.sent,t.abrupt("return",n.json());case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function L(t){return D.apply(this,arguments)}function D(){return(D=Object(o.a)(l.a.mark((function t(e){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(T,"/").concat(e),{method:"DELETE"});case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function A(t){return F.apply(this,arguments)}function F(){return(F=Object(o.a)(l.a.mark((function t(e){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(T,{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}});case 2:return n=t.sent,t.abrupt("return",n.json());case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var J=function(){var t=Object(r.useState)(!1),e=Object(u.a)(t,2),n=e[0],c=e[1],a=Object(r.useState)(""),i=Object(u.a)(a,2),p=i[0],j=i[1],b=Object(r.useState)(""),d=Object(u.a)(b,2),f=d[0],h=d[1],_=Object(r.useState)(""),x=Object(u.a)(_,2),y=x[0],N=x[1],E=Object(s.b)(),T=Object(s.c)(k),I=Object(s.c)(S),D=Object(s.c)(w),F=Object(s.c)(C);Object(r.useEffect)((function(){var t=function(){var t=Object(o.a)(l.a.mark((function t(){var e,n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m(D);case 2:return e=t.sent,t.next=5,P(D);case 5:n=t.sent,E(v(n)),E({type:O,payload:e});case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();D&&t()}),[D]);var J=function(){var t=Object(o.a)(l.a.mark((function t(e){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,L(e);case 2:return t.next=4,P(D);case 4:n=t.sent,E(v(n));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),M=function(t){switch(t.target.name){case"name":h(t.target.value);break;case"email":N(t.target.value);break;case"comment":j(t.target.value)}},B=function(){var t=Object(o.a)(l.a.mark((function t(){var e,n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e={postId:D,name:f,email:y,body:p},t.next=3,A(e);case 3:return t.next=5,P(D);case 5:n=t.sent,E(v(n)),h(""),N(""),j("");case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(g.jsx)("div",{className:"post",children:F?Object(g.jsxs)("div",{children:[Object(g.jsx)("h1",{className:"post__title",children:"Selected post"}),Object(g.jsx)("p",{className:"post__name",children:null===T||void 0===T?void 0:T.title}),Object(g.jsx)("b",{children:"Content:"}),Object(g.jsx)("p",{children:null===T||void 0===T?void 0:T.body}),Object(g.jsx)("p",{className:"post__add-comment",children:"Add comment"}),Object(g.jsxs)("form",{className:"post__form",action:"",children:[Object(g.jsxs)("label",{htmlFor:"name",className:"post__form__label",children:["Name",Object(g.jsx)("input",{className:"input is-link is-small post__form__input",name:"name",type:"text",onChange:M,value:f,minLength:2})]}),Object(g.jsxs)("label",{className:"post__form__label",htmlFor:"email",children:["Email",Object(g.jsx)("input",{className:"input is-link is-small post__form__input",name:"email",type:"email",onChange:M,value:y})]}),Object(g.jsxs)("label",{className:"post__form__label",htmlFor:"comment",children:["Comment",Object(g.jsx)("input",{className:"input is-link is-small post__form__input",name:"comment",type:"text",onChange:M,value:p,minLength:2})]}),Object(g.jsx)("button",{type:"button",onClick:B,className:"button is-dark is-small post__form__button",children:"Add comment"})]}),Object(g.jsx)("br",{}),Object(g.jsx)("button",{type:"button",onClick:function(){c(!n)},children:n?"Hide comments":"Show comments"}),n&&(I.length?I.map((function(t){return Object(g.jsxs)("p",{className:"post__comment",children:[Object(g.jsx)("p",{className:"post__comment__name",children:t.name}),Object(g.jsxs)("div",{className:"post__comment__content",children:[Object(g.jsx)("p",{children:t.body}),Object(g.jsx)("button",{className:"post__comment__button",type:"button",onClick:function(){return J(t.id)},children:"x"})]})]},t.id)})):Object(g.jsx)("p",{children:"Comments not found"}))]}):Object(g.jsx)("p",{className:"post__not-found",children:"Post is not selected"})})},M=function(){return Object(g.jsxs)("div",{className:"main",children:[Object(g.jsx)(E,{}),Object(g.jsx)(J,{})]})},B=n(12),H=n(3),q=n(14),z={posts:[],post:null,postId:0,comments:[],selectedPost:null},G=Object(q.a)((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case f:return Object(H.a)(Object(H.a)({},t),{},{posts:Object(B.a)(e.payload)});case O:return Object(H.a)(Object(H.a)({},t),{},{post:Object(H.a)({},e.payload)});case h:return Object(H.a)(Object(H.a)({},t),{},{postId:e.payload});case _:return Object(H.a)(Object(H.a)({},t),{},{comments:Object(B.a)(e.payload)});case x:return Object(H.a)(Object(H.a)({},t),{},{selectedPost:e.payload});default:return t}})),K=function(){return Object(g.jsx)(s.a,{store:G,children:Object(g.jsx)(M,{})})};a.a.render(Object(g.jsx)(K,{}),document.getElementById("root"))}},[[28,1,2]]]);
//# sourceMappingURL=main.2a96c9a2.chunk.js.map